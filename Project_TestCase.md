# 入札公告要件判定システム - テストケース表

## 関連ドキュメント
- **テスト仕様書**: `/Project_Test.md`
- **設計書**: `/Project_design.md`
- **要件定義書**: `/要件定義書.md`

---

## 1. テストケース凡例

| 項目 | 説明 |
|------|------|
| ID | テストケース識別子 |
| 分類 | UT:単体テスト, IT:結合テスト, ST:システムテスト, UAT:受入テスト |
| 優先度 | H:高, M:中, L:低 |
| ステータス | 未実施, 実施中, 合格, 不合格, 保留 |

---

## 2. 単体テストケース

### 2.1 共通モジュール (Utils.gs)

| ID | テスト項目 | 入力値 | 期待値 | 優先度 | ステータス | 備考 |
|----|------------|---------|---------|---------|------------|------|
| T-UT-001 | 全角英数字→半角変換 | "ＡＢＣ１２３" | "ABC123" | H | 未実施 | |
| T-UT-002 | 全角スペース→半角変換 | "　" | " " | M | 未実施 | |
| T-UT-003 | 混在文字列の変換 | "Ａ1　あいう" | "A1 あいう" | H | 未実施 | 日本語は変換しない |
| T-UT-004 | 標準日付形式パース | "2025/01/15" | Date(2025,0,15) | H | 未実施 | |
| T-UT-005 | 全角数字日付パース | "２０２５年１月１５日" | Date(2025,0,15) | H | 未実施 | |
| T-UT-006 | 和暦日付パース | "令和7年1月15日" | Date(2025,0,15) | H | 未実施 | |
| T-UT-007 | 月日のみパース | "1月15日" | Date(現在年,0,15) | M | 未実施 | 今年とみなす |
| T-UT-008 | 不正な日付 | "2025/13/32" | null | H | 未実施 | エラー処理確認 |

### 2.2 データアクセス層 (MasterDataAccess.gs)

| ID | テスト項目 | 入力値 | 期待値 | 優先度 | ステータス | 備考 |
|----|------------|---------|---------|---------|------------|------|
| T-UT-011 | 企業ID検索（存在） | "C00001" | 企業オブジェクト | H | 未実施 | |
| T-UT-012 | 企業ID検索（不在） | "C99999" | null | H | 未実施 | |
| T-UT-013 | 企業ID検索（空値） | "" | エラー | H | 未実施 | |
| T-UT-014 | 欠格フラグなし | 全フラグFALSE | {qualified: true} | H | 未実施 | |
| T-UT-015 | 破産フラグあり | bankruptcy_flg: true | {qualified: false} | H | 未実施 | |
| T-UT-016 | 複数欠格フラグ | 複数フラグTRUE | 複数欠格理由 | H | 未実施 | |

### 2.3 判定エンジン - 欠格要件 (DisqualificationJudge.gs)

| ID | テスト項目 | 入力値 | 期待値 | 優先度 | ステータス | 備考 |
|----|------------|---------|---------|---------|------------|------|
| T-UT-017 | 全欠格要件クリア | 全フラグFALSE | "適格" | H | 未実施 | |
| T-UT-018 | 破産手続き中 | bankruptcy_flg: true | "不適格：破産" | H | 未実施 | |
| T-UT-019 | 暴力団関係 | violent_relation_flg: true | "不適格：暴力団" | H | 未実施 | |
| T-UT-020 | 社会保険滞納 | social_insurance_delinquent_flg: true | "不適格：滞納" | H | 未実施 | |
| T-UT-021 | 複数欠格該当 | 複数フラグTRUE | 複数理由表示 | M | 未実施 | |

### 2.4 判定エンジン - 等級要件 (GradeJudge.gs)

| ID | テスト項目 | 入力値 | 期待値 | 優先度 | ステータス | 備考 |
|----|------------|---------|---------|---------|------------|------|
| T-UT-022 | 等級完全一致 | 要件:土木A, 保有:土木A | true | H | 未実施 | |
| T-UT-023 | 等級不足 | 要件:土木A, 保有:土木B | false | H | 未実施 | |
| T-UT-024 | 以上条件（満たす） | 要件:土木B以上, 保有:土木A | true | H | 未実施 | A > B |
| T-UT-025 | 以上条件（満たさない） | 要件:土木A以上, 保有:土木B | false | H | 未実施 | |
| T-UT-026 | 工事種別不一致 | 要件:土木A, 保有:建築A | false | H | 未実施 | |

### 2.5 判定エンジン - 地域要件 (RegionJudge.gs)

| ID | テスト項目 | 入力値 | 期待値 | 優先度 | ステータス | 備考 |
|----|------------|---------|---------|---------|------------|------|
| T-UT-027 | 都道府県一致 | 要件:東京都, 拠点:東京都 | true | H | 未実施 | |
| T-UT-028 | 都道府県不一致 | 要件:東京都, 拠点:神奈川県 | false | H | 未実施 | |
| T-UT-029 | 市区町村一致 | 要件:千代田区, 拠点:千代田区 | true | H | 未実施 | |
| T-UT-030 | 複数拠点（該当あり） | 要件:東京都, 複数拠点 | true | M | 未実施 | |
| T-UT-031 | 地域指定なし | 要件:なし | true | M | 未実施 | 全国対象 |

### 2.6 判定エンジン - 実績要件 (AchievementJudge.gs)

| ID | テスト項目 | 入力値 | 期待値 | 優先度 | ステータス | 備考 |
|----|------------|---------|---------|---------|------------|------|
| T-UT-032 | 金額要件（満たす） | 要件:1億円以上, 実績:1.5億円 | true | H | 未実施 | |
| T-UT-033 | 金額要件（満たさない） | 要件:1億円以上, 実績:0.8億円 | false | H | 未実施 | |
| T-UT-034 | 期間内実績 | 要件:過去3年, 実績:2年前 | true | H | 未実施 | |
| T-UT-035 | 期間外実績 | 要件:過去3年, 実績:4年前 | false | H | 未実施 | |
| T-UT-036 | 工事成績平均 | 要件:平均75点, 実績:[80,70,75] | true | H | 未実施 | 平均75点 |
| T-UT-037 | JV出資比率 | 要件:20%以上, 実績:30% | true | M | 未実施 | |

### 2.7 判定エンジン - 技術者要件 (EngineerJudge.gs)

| ID | テスト項目 | 入力値 | 期待値 | 優先度 | ステータス | 備考 |
|----|------------|---------|---------|---------|------------|------|
| T-UT-038 | 必要資格保有 | 要件:1級土木, 保有:1級土木 | true | H | 未実施 | |
| T-UT-039 | 必要資格なし | 要件:1級土木, 保有:2級土木 | false | H | 未実施 | |
| T-UT-040 | 同等資格判定 | 要件:土木施工, 保有:技術士 | true | M | 未実施 | |
| T-UT-041 | 配置可能性確認 | 要件:1名, 配置可能:2名 | true | H | 未実施 | |
| T-UT-042 | 配置不可 | 要件:2名, 配置可能:1名 | false | H | 未実施 | |

---

## 3. 結合テストケース

### 3.1 ワークフロー結合

| ID | テスト項目 | シナリオ | 期待結果 | 優先度 | ステータス | 備考 |
|----|------------|-----------|-----------|---------|------------|------|
| T-IT-001 | 単一公告完全処理 | 1件の公告を最初から最後まで | 全工程完了 | H | 未実施 | |
| T-IT-002 | 100件バッチ処理 | 100件を一括処理 | 適切に分割処理 | H | 未実施 | |
| T-IT-003 | タイムアウト再開 | 5分30秒で中断 | 正しく再開 | H | 未実施 | |
| T-IT-004 | 複数回タイムアウト | 3回以上の中断 | 最終的に完了 | M | 未実施 | |
| T-IT-005 | OCRエラー処理 | OCRエラー発生 | エラー記録＆継続 | H | 未実施 | |
| T-IT-006 | データ不整合 | 不正な企業ID | スキップ＆継続 | M | 未実施 | |

### 3.2 判定フロー結合

| ID | テスト項目 | シナリオ | 期待結果 | 優先度 | ステータス | 備考 |
|----|------------|-----------|-----------|---------|------------|------|
| T-IT-007 | 全要件判定 | 6種類の要件を順次判定 | 統合結果出力 | H | 未実施 | |
| T-IT-008 | 欠格→即終了 | 欠格要件でNG | 他要件スキップ | H | 未実施 | |
| T-IT-009 | 部分的適格 | 一部要件のみ満たす | 詳細結果表示 | M | 未実施 | |
| T-IT-010 | 複数企業判定 | 1公告×5企業 | 全企業判定完了 | H | 未実施 | |

---

## 4. システムテストケース

### 4.1 エンドツーエンド

| ID | テスト項目 | シナリオ | 期待結果 | 優先度 | ステータス | 備考 |
|----|------------|-----------|-----------|---------|------------|------|
| T-ST-001 | 初回利用フロー | 新規ユーザーが最初から | 全機能動作 | H | 未実施 | |
| T-ST-002 | 大量データ処理 | 200件投入 | 全件処理完了 | H | 未実施 | |
| T-ST-003 | 処理時間測定 | 100件の処理時間 | 60分以内 | H | 未実施 | |
| T-ST-004 | 同時実行 | 5ユーザー同時 | 全員正常完了 | M | 未実施 | |

### 4.2 性能テスト

| ID | テスト項目 | 測定内容 | 合格基準 | 優先度 | ステータス | 備考 |
|----|------------|-----------|-----------|---------|------------|------|
| T-ST-005 | 1件処理時間 | 平均処理時間 | 30秒以内 | H | 未実施 | |
| T-ST-006 | API応答時間 | OCR API応答 | 3秒以内 | M | 未実施 | |
| T-ST-007 | メモリ使用量 | ピーク時使用量 | 制限内 | L | 未実施 | |
| T-ST-008 | エラー率 | 1000件中のエラー | 1%以下 | H | 未実施 | |

---

## 5. 受入テストケース

### 5.1 業務シナリオ

| ID | テスト項目 | 実施内容 | 確認項目 | 優先度 | ステータス | 備考 |
|----|------------|-----------|-----------|---------|------------|------|
| T-UAT-001 | 実公告判定 | 実際の公告10件 | 判定精度 | H | 未実施 | ユーザー実施 |
| T-UAT-002 | 日常運用 | 1週間の運用 | 運用性 | H | 未実施 | |
| T-UAT-003 | エラー対応 | 各種エラー発生 | 対応容易性 | M | 未実施 | |
| T-UAT-004 | レポート確認 | 生成レポート | 見やすさ | M | 未実施 | |

### 5.2 ユーザビリティ

| ID | テスト項目 | 評価内容 | 合格基準 | 優先度 | ステータス | 備考 |
|----|------------|-----------|-----------|---------|------------|------|
| T-UAT-005 | メニュー操作 | 直感的操作性 | 5段階で4以上 | M | 未実施 | |
| T-UAT-006 | エラーメッセージ | 理解しやすさ | 明確で具体的 | H | 未実施 | |
| T-UAT-007 | 進捗表示 | 処理状況把握 | リアルタイム更新 | M | 未実施 | |
| T-UAT-008 | ヘルプ機能 | 説明の充実度 | 全機能カバー | L | 未実施 | |

---

## 6. 回帰テストケース

### 6.1 主要機能確認

| ID | テスト項目 | 確認内容 | 期待結果 | 優先度 | ステータス | 備考 |
|----|------------|-----------|-----------|---------|------------|------|
| T-RT-001 | 基本判定フロー | 修正後の動作確認 | 既存機能維持 | H | 未実施 | 変更時実施 |
| T-RT-002 | データ整合性 | DB更新後の確認 | データ不整合なし | H | 未実施 | |
| T-RT-003 | 性能劣化確認 | 処理時間再測定 | 劣化なし | M | 未実施 | |

---

## 7. テスト実施記録

### 7.1 実施サマリー

| 日付 | 実施者 | テスト範囲 | 合格数 | 不合格数 | 備考 |
|------|--------|------------|---------|-----------|------|
| | | | | | |

### 7.2 不具合一覧

| ID | 発見日 | テストケースID | 不具合内容 | 重要度 | ステータス | 備考 |
|----|--------|----------------|------------|---------|------------|------|
| | | | | | | |

---

## 8. テストデータ

### 8.1 マスターテストデータ

| データ種別 | ファイル名 | 内容 | 備考 |
|------------|------------|------|------|
| 企業マスター | test_company.csv | テスト企業50社 | 各種パターン含む |
| 拠点マスター | test_office.csv | テスト拠点100件 | 地域分布考慮 |
| 従業員マスター | test_employee.csv | テスト従業員200名 | 資格パターン網羅 |

### 8.2 シナリオデータ

| シナリオ | ファイル名 | 内容 | 備考 |
|----------|------------|------|------|
| 正常系 | normal_case.csv | 標準的な公告20件 | |
| 異常系 | error_case.csv | エラーケース10件 | |
| 境界値 | boundary_case.csv | 境界値テスト5件 | |
| 性能 | performance_case.csv | 大量データ200件 | |

---

## 改訂履歴
- 2024-01-XX: 初版作成