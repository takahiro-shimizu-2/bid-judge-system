---

# **入札公告技術者要件判定システム：最終版フロー（詳説）**

## **1\. 前提・全体像**

1. PDF公告をOCR＋LLMで解析 → T\_BID\_REQUIREMENTに要件が登録される  
2. システムが\*\*企業DB(M\_COMPANY / T\_OFFICE\_LICENSE / T\_OFFICE\_EXPERIENCE / T\_EMPLOYEE\_QUAL等)\*\*を照合し、NG/OKを判定  
3. 結果を**T\_BID\_EVALUATION**に書き込み、不足要件は**T\_BID\_SHORTAGE\_DETAIL**に登録  
4. JV(共同企業体)要件は**将来拡張**であり、現時点では「JV要件ありの場合は手動確認」とする

以下では、\*\*サンプル公告(1～39)\*\*に記載された要件をすべて網羅し、(A)欠格→(B)等級/工種/スコア→(C)地域→(D)実績→(E)技術者資格→(Z)JV の順にステップを踏んで判定します。  
 **いずれかでNGになれば即NG**とし、**不足要件をT\_BID\_SHORTAGE\_DETAIL**に書き込みます。

---

## **2\. (A) 欠格要件**

### **2.1 趣旨**

公告にはほぼ必ず「予決令70条/71条に該当しない者」「破産者や暴力団関係はNG」「指名停止中はNG」「情報保全NGは排除」などが書かれています。  
 **企業の基本フラグ**をチェックし、**一発アウト**となるかどうか最初に判定します。

### **2.2 判定ロジック**

1. **予決令70条/71条該当**

   * `M_COMPANY.article70_flg=TRUE` → NG（建設業法第70条該当）  
   * `M_COMPANY.article71_flg=TRUE` → NG（建設業法第71条該当）  

2. **破産/成年被後見人**

   * `M_COMPANY.bankrupt_flg=TRUE` → NG（破産者）  
   * `M_COMPANY.legal_incapable_flg=TRUE` → NG（成年被後見人）  

3. **会社更生法/民事再生法**

   * `M_COMPANY.rehabilitation_flg=TRUE` かつ `M_COMPANY.reobtained_license_date` がNULL → NG  
      （更生手続中で再度格付を取得していない場合NG）  

4. **暴力団関係**

   * `M_COMPANY.violent_relation_flg=TRUE` → NG  

5. **指名停止**

   * `T_OFFICE_LICENSE.is_suspended_flg=TRUE` → NG（拠点ごとの指名停止）  

6. **情報保全体制**

   * 公告に「情報保全に係る履行体制が適切である者」とあれば、 `M_COMPANY.information_security_cert_flg=TRUE` が必要  
   * FALSEならNG  

7. **社会保険/労働保険滞納**

   * 公告に「社会保険等の滞納がない者」とあれば `M_COMPANY.social_insurance_delinquent_flg=TRUE` → NG  
   * （TRUE=滞納あり）  

8. **破壊的団体（破防法）**

   * `M_COMPANY.terrorist_org_flg=TRUE` → NG  

9. **外国法的制約**

   * `M_COMPANY.foreign_restricted_flg=TRUE` → NG  

10. **日本銀行取引停止**

    * 一部公告(日本銀行関連)で要求がある場合 → `M_COMPANY.boj_suspended_flg=TRUE` → NG

### **2.3 処理**

* **いずれかでTRUE→evaluation\_status='NG'**, T\_BID\_SHORTAGE\_DETAILに「（暴力団フラグ）」「後見人フラグ」「情報保全NG」等の不足要件を登録  
* そのまま**判定終了**。

---

## **3\. (B) 競争参加資格 (等級・工事種別・経営事項評価スコア)**

**(A)でNGにならなかった**企業について、**公告が要求する競争参加資格**を満たすかを判定します。  
 ここでは\*\*「全省庁統一資格」OR「個別省庁(最上位)のライセンス」\*\*→**工種(営業品目)**→**等級**→(必要なら)**score(経営事項評価数値)** の順に確認します。

### **3.1 全省庁統一資格か否か**

1. **LLM抽出**で公告に「全省庁統一資格(物品/役務/…)」が書かれていれば、

   * システムは `T_OFFICE_LICENSE` を検索し、 `category_segment='全省庁統一'` のライセンスがあるか  
   * 該当する**construction\_no**(例:「役務の提供等」)を持つレコードを確認  
   * `license_grade` が「A等級以上」「B等級以上」などを満たすか → 例: B等級以上 \=\> `license_grade ∈ {A,B}`  
   * 経営事項評価(license\_score\>=X)が必要なら合わせて判定  
   * なければNG  
2. **そうでなければ、個別省庁の最上位発注機関へ**

   * 公告のagency\_noをM\_AGENCYでたどり、**親階層**に「防衛省/文科省/法務省…」などを見つける  
   * もし公告が「防衛省競争参加資格(建築一式工事)」を要求していれば、 `T_OFFICE_LICENSE.agency_no in {防衛省,○○防衛局}` で検索  
   * 該当工事種別(例: 建築一式) があるか  
   * `license_grade` がD等級以上などを満たすか  
   * さらにscore(例:1200点以上) → `license_score >=1200`  
   * 見つからなければNG

### **3.2 工種(営業品目)判定**

* **LLM解析**で公告に「建築一式」「電気」「管工事」「物品の販売」…などが抽出される  
* 企業の `T_OFFICE_LICENSE.construction_no` に同じconstruction\_noがあるか  
* ない場合はNG

### **3.3 等級判定**

* 「D等級以上」→ {A,B,C,D}  
* 「C等級以上」→ {A,B,C}  
* 企業が持つ `license_grade` が該当しなければNG

### **3.4 経営事項評価スコア(license\_score)**

* 「1200点以上」→ `license_score >=1200`  
* 満たさない →NG

---

## **4\. (C) 地域要件**

公告例：**「○○防衛局管轄区域内(○○県/××県など)に営業所があること」や「近畿地区資格を有する者」**。  
 **具体例**:

* 公告1 → 「中国四国防衛局管轄(岡山,広島,山口,鳥取,島根,香川,徳島,愛媛,高知)に営業所」  
* 公告3 → 「東北防衛局管轄(青森,岩手,秋田,宮城,山形,福島)に…」

**判定**:

* `M_OFFICE.region_prefecture` を企業の全拠点でチェック  
* もし要求リスト(LLMで解析した都道府県)にひとつも該当が無ければ → NG  
* 逆に「近畿地域の競争参加資格を有する」とだけ書かれているなら `T_OFFICE_LICENSE` の region区分を見る（ただしregionフィールドを設けずにagency\_noのparent階層で判定する運用もあり）

**NGの場合は判定終了**。

---

## **5\. (D) 実績要件**

多くの公告で「平成XX年度以降に国(または防衛省など)が発注した、工事成績65点以上の実績…」や「元請（JV比率20%以上含む）」などが登場します。

1. **期間**: 例「平成20年度以降」→ `completion_date >= 20XX-04-01`  
2. **元請 or JV出資\>=20%** → `is_jv_flg=FALSE OR (is_jv_flg=TRUE AND jv_ratio>=20)`  
3. **発注機関**(例: 国or地方公共団体 / 防衛省等)  
   * `agency_no in {一覧}` かどうか  
4. **工事成績 \>=65点** → `final_score >=65`  
5. **複数件の平均**を要求する公告(例：公告8：過去工事の平均65点以上)  
   * T\_OFFICE\_EXPERIENCEを複数取得→ average(final\_score) \>=65 →OK  
6. **構造や延床面積** → 例: RC/S造 1000㎡以上 etc.  
   * ただし本システムでは**基本形外は手動確認**メッセージを出す運用  
   * 「RC/S造」などは事前に**structure\_type**をDBに持たない方針→ システムが「該当あり/なしが自動判定できない」と表示  
7. **結果**: 1件以上満たす実績があればOK、なければNG

---

## **6\. (E) 技術者資格要件**

公告には、**非常に多種多様**な技術者資格(監理技術者資格者証 / 1級建築施工管理技士 / 技術士 / 基幹技能者 / 電気工事士 / …)が列挙されるケースがあります。  
 本システムは**M\_QUALIFICATION**\+**T\_EMPLOYEE\_QUAL**を参照し、「どの従業員がどの資格を持っているか」をチェックします。

### **6.1 判定フロー概要**

1. **LLM**で公告から「必要資格リスト」を抽出

   * 例: 「監理技術者資格者証 \+ 監理技術者講習修了証 \+ 1級土木施工管理技士 いずれか…」など  
   * もし「同等以上資格」と書かれている場合でも、「何が同等か」は本システムがマッピングを把握していなければ**自動判定**できない → 「**同等資格不明につき手動確認**」のメッセージを出す。**OKにはしない**。  
2. システムは企業(M\_COMPANY)の全従業員(M\_EMPLOYEE)→資格(T\_EMPLOYEE\_QUAL)を読み込み、**次のステップ**で判定:

    **(E1) 監理技術者資格者証/講習修了**

   * 監理技術者資格者証を**M\_QUALIFICATION**上でIDを振る(例: Q9001)  
   * 監理技術者講習修了証を別ID(例: Q9002)  
   * 同一employee\_noで**両方 is\_active\_flg=TRUE**を持っていれば\*\*「監理技術者としてOK」\*\*  
   * どちらか欠ければNG  
3. **(E2) 施工管理技士系(1級/2級/補など)**

   * 公告が「1級建築施工管理技士」なら**qualification\_no**(例: Q0010)  
   * 2級(建築/土木/電気/管 etc.) → M\_QUALIFICATIONで複数区分  
   * 従業員が**いずれか**を持っているか → OK  
   * **同等以上**(ex. 1級建築士を1級建築施工管理技士と同等とみなす) → もし**システムでマッピング**が存在すればOK  
   * \*\*マッピングが存在しない「同等以上」\*\*を言われたら、「**自動判定不可**: 要手動確認」としてメッセージ発出 → NG扱いにする  
4. **(E3) その他資格(電気工事士/消防設備士/基幹技能者など)**

   * 同様に**qualification\_no**を割り当て  
   * 公告が要求する資格が見つかればOK  
   * 見つからなければNG  
5. **(E4) 技術者に対する「過去工事成績が65点以上」の経験**

   * もし公告で「この資格を持つ主任技術者が、防衛省発注工事で65点以上の実績を有すること」等が書かれていれば、  
   * T\_EMPLOYEE\_EXPERIENCEで `employee_no=? & final_score>=65 & agency_no in(防衛省) …`  
   * 着工～完工に従事しているか厳密に見るか → "基本形"はscore\>=65だけチェック、さらにメッセージで「着工～完工の明示的な判定は手動」とする

### **6.2 結果**

* もし要件を満たす**従業員が一人もいない** → NG  
* いる → OK  
* 「同等以上資格を保有」が**DBマッピングにない**場合は、**システムでは自動判定不可** → 「**同等資格不明、要手動確認**」と不足要件に出して**NG扱い**。

---

## **7\. (Z) JV要件（将来対応）**

* 当面は**JV用マスターを作らず**、公告に「JV可」や「出資比率30%以上…」など書かれていても、**手動確認**を促す  
* 例：evaluation\_status='要確認' とし T\_BID\_SHORTAGE\_DETAILに「JV要件は現在未対応、手動でご確認ください」と書く  
* 将来的には**T\_JV\_CONTRACT / T\_JV\_MEMBER**を用意し、**代表企業の等級1200点以上、構成員800点以上**などを判定するロジックを追加する予定。

---

## **8\. 処理の順序まとめ**

function evaluateBid(announcement\_no, company\_no):

    // Step A: 欠格要件

    if not checkIneligibility(company\_no):

        setNG("欠格要件に該当")

        return

    // Step B: 競争参加資格(等級+工種+score)

    if not checkCompetitionQualification(announcement\_no, company\_no):

        setNG("競争参加資格を満たさず(等級/スコア等)")

        return

    // Step C: 地域要件

    if not checkRegion(announcement\_no, company\_no):

        setNG("地域要件を満たさず")

        return

    // Step D: 実績要件

    if not checkExperience(announcement\_no, company\_no):

        setNG("実績要件不足")

        return

    // Step E: 技術者資格要件(多彩な資格+監理技術者講習+同等以上など)

    if not checkEngineerRequirement(announcement\_no, company\_no):

        setNG("技術者資格要件NG")

        return

    // Step Z: JV(手動確認)

    if isJV(announcement\_no):

        setManualCheck("JV要件は現行システム未対応。手動確認してください。")

        return

    // 全項目OK

    setOK()

    return

**補足**:

* `checkIneligibility(company_no)` → bankrupt\_flg / violent\_relation\_flg / is\_suspended\_flg / information\_security\_cert\_flg など一括参照。  
* `checkCompetitionQualification(announcement_no, company_no)` → 「全省庁統一か？」「個別省庁か？」「工種 / 等級 / スコア」  
* `checkRegion(announcement_no, company_no)` → M\_OFFICE.region\_prefecture in {…} か  
* `checkExperience(announcement_no, company_no)` → T\_OFFICE\_EXPERIENCEに期間/score≥65…  
* `checkEngineerRequirement(announcement_no, company_no)` → 施工管理技士系/技術士/建築士/消防設備士/基幹技能者… 監理技術者講習。**同等以上がDBに無い**場合 →「未判定」→NG扱い

---

## **9\. 地域要件の詳細表現**

**(C) 地域要件**の判定をもう少し詳しく書きます。

* 例：公告「○○防衛局管轄(○○県,××県,…)に建設業法許可の本店または営業所があること」  
1. システムが**LLM解析**で「防衛局管轄: {岡山, 広島, 山口, …}」と抽出  
2. 企業の**M\_OFFICE**レコードを全部見る  
   * `region_prefecture` ∈ {岡山, 広島, 山口, …}か？  
   * もし**1件でも一致**すれば**OK**、ゼロなら**NG**  
3. ただし「建設業法許可の本店/支店」でなければいけない、と書かれている場合 → 企業が当該拠点で**T\_OFFICE\_LICENSE**を取得しているか  
4. **NG**の際は**T\_BID\_SHORTAGE\_DETAIL**に「管轄区域内の営業所が無い」などを記載。

---

## **10\. 「同等以上」資格の扱い (技術者資格)**

### **10.1 対応方法**

* 公告で「1級土木施工管理技士 または これと同等以上」と書かれている場合  
* システムに**マッピング**があれば→「技術士(建設部門)」「1級建築士」などを同等と認める  
* しかし、新たなパターンで「(X)を同等扱いして良いか？」不明なら\*\*「システムで不明」**とし**要手動確認\*\*: NG扱い  
  * T\_BID\_SHORTAGE\_DETAILに「同等以上資格不明につき自動判定不可。資格名=○○はDB未登録」と出す

### **10.2 監理技術者資格者証・講習修了証**

* 同じように**M\_QUALIFICATION**に「監理技術者資格者証(QU1001)」「監理技術者講習修了証(QU1002)」を登録しているとみなし、**T\_EMPLOYEE\_QUAL**で2つとも保有 → 監理技術者OK  
* 1つでもないと**NG**

---

## **11\. 結論**

1. **欠格要件(A)**：企業の破産や暴力団、後見、指名停止、情報保全不備、社会保険未納などは**最初にまとめてNG判定**  
2. **競争参加資格(B)**：  
   * 全省庁統一 or 個別省庁(最上位)→工種(営業品目)→等級→スコア  
   * 満たさなければNG  
3. **地域要件(C)**：M\_OFFICEの所在都道府県が合致しない場合NG  
4. **実績要件(D)**：T\_OFFICE\_EXPERIENCEで**期間/score≥65/JV出資比率≥20%など**満たさなければNG  
5. **技術者資格(E)**：  
   * 公告が要求する資格リストをLLMで抽出  
   * M\_QUALIFICATIONで該当IDor同等を探す  
   * T\_EMPLOYEE\_QUALで保有者がいるか  
   * 監理技術者講習修了証や工事成績経験(≥65)など追加条件  
   * 「同等以上」不明なら自動判定NG  
6. **JV(Z)**：今回は**未対応**。公告に書かれていたら**手動確認**へ誘導。

\*\*これにより、サンプル公告(1～39)に盛り込まれたあらゆる要件（欠格/等級/スコア/地域/実績/技術者資格/同等資格/情報保全など）\*\*を漏れなくチェックできます。

